.. role:: bash(code)
    :language: bash

.. role:: python(code)
    :language: python

Package version query toolkit for Python
========================================

.. image:: https://travis-ci.org/mbdevpl/version-query.svg?branch=master
    :target: https://travis-ci.org/mbdevpl/version-query
    :alt: build status from Travis CI

.. image:: https://ci.appveyor.com/api/projects/status/github/mbdevpl/version-query/branch/master?svg=true
    :target: https://ci.appveyor.com/project/mbdevpl/version-query
    :alt: build status from AppVeyor

.. image:: https://coveralls.io/repos/github/mbdevpl/version-query/badge.svg?branch=master
    :target: https://coveralls.io/github/mbdevpl/version-query
    :alt: test coverage from Coveralls

This script is motivated by wish to avoid hardcoding the version number when maintaining
a Python package.

Instead of hardcoding:

.. code:: python

    __version__ = '1.5.0.dev2'

You can instead:

.. code:: python

    from version_query import generate_version_str

    __version__ = generate_version_str()


how does it work
----------------

At development time, this will automatically infer the current version number based on:

*   tags
*   current commit SHA
*   index status

in your git repository. Therefore the package can be built and shipped to PyPI based only on status
of the git repository.

At installation time, and at runtime, there might be no git repository, and in this case
the script finds ``PKG-INFO`` file attached to the package, parses it, and reads
the current version from there.

``PKG-INFO`` is, by default, automatically-generated by setuptools when building and it is packaged
into distributions. So by default, it should be present.


limitations
-----------

Either git repository or ``PKG-INFO`` file must be present for the script to work.


requirements
------------

Python version >= 3.3.

Python libraries as specified in `<requirements.txt>`_.

Building and running tests additionally requires packages listed in `<dev_requirements.txt>`_.

Tested on Linux, OS X and Windows.
